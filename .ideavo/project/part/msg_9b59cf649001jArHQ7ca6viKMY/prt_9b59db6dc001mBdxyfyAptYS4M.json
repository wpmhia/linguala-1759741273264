{
  "id": "prt_9b59db6dc001mBdxyfyAptYS4M",
  "messageID": "msg_9b59cf649001jArHQ7ca6viKMY",
  "sessionID": "ses_65b8a18f2ffeMlgQ4UP0yHPHsm",
  "type": "tool",
  "tool": "write",
  "callID": "toolu_01CYrGmLjv5DBgXwQR437xeG",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/text-diff.tsx",
      "content": "\"use client\"\n\nimport { useMemo } from \"react\"\n\ninterface TextDiffProps {\n  originalText: string\n  improvedText: string\n  className?: string\n}\n\ninterface DiffPart {\n  type: 'unchanged' | 'removed' | 'added'\n  text: string\n}\n\nfunction generateDiff(original: string, improved: string): DiffPart[] {\n  // Simple word-level diff algorithm\n  const originalWords = original.split(/(\\s+)/)\n  const improvedWords = improved.split(/(\\s+)/)\n  \n  const diff: DiffPart[] = []\n  let i = 0, j = 0\n  \n  while (i < originalWords.length || j < improvedWords.length) {\n    if (i >= originalWords.length) {\n      // Only improved text left\n      diff.push({ type: 'added', text: improvedWords[j] })\n      j++\n    } else if (j >= improvedWords.length) {\n      // Only original text left\n      diff.push({ type: 'removed', text: originalWords[i] })\n      i++\n    } else if (originalWords[i] === improvedWords[j]) {\n      // Same word\n      diff.push({ type: 'unchanged', text: originalWords[i] })\n      i++\n      j++\n    } else {\n      // Find next matching word\n      let foundMatch = false\n      \n      // Look ahead in improved text for current original word\n      for (let k = j + 1; k < Math.min(j + 5, improvedWords.length); k++) {\n        if (originalWords[i] === improvedWords[k]) {\n          // Add words from improved that come before the match\n          for (let l = j; l < k; l++) {\n            diff.push({ type: 'added', text: improvedWords[l] })\n          }\n          diff.push({ type: 'unchanged', text: originalWords[i] })\n          i++\n          j = k + 1\n          foundMatch = true\n          break\n        }\n      }\n      \n      if (!foundMatch) {\n        // Look ahead in original text for current improved word\n        for (let k = i + 1; k < Math.min(i + 5, originalWords.length); k++) {\n          if (improvedWords[j] === originalWords[k]) {\n            // Add words from original that come before the match\n            for (let l = i; l < k; l++) {\n              diff.push({ type: 'removed', text: originalWords[l] })\n            }\n            diff.push({ type: 'unchanged', text: improvedWords[j] })\n            i = k + 1\n            j++\n            foundMatch = true\n            break\n          }\n        }\n      }\n      \n      if (!foundMatch) {\n        // No match found, treat as replacement\n        diff.push({ type: 'removed', text: originalWords[i] })\n        diff.push({ type: 'added', text: improvedWords[j] })\n        i++\n        j++\n      }\n    }\n  }\n  \n  return diff\n}\n\nexport function TextDiff({ originalText, improvedText, className = \"\" }: TextDiffProps) {\n  const diffParts = useMemo(() => {\n    return generateDiff(originalText, improvedText)\n  }, [originalText, improvedText])\n  \n  if (originalText === improvedText) {\n    return (\n      <div className={`p-4 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800 ${className}`}>\n        <div className=\"flex items-center gap-2 text-green-700 dark:text-green-300 text-sm font-medium mb-2\">\n          ‚úÖ No changes needed\n        </div>\n        <p className=\"text-sm text-slate-600 dark:text-slate-400\">\n          Your text looks great! No improvements were suggested.\n        </p>\n      </div>\n    )\n  }\n  \n  return (\n    <div className={`space-y-4 ${className}`}>\n      <div className=\"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300\">\n        üîç Changes made:\n      </div>\n      \n      <div className=\"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700\">\n        <div className=\"text-sm leading-relaxed\">\n          {diffParts.map((part, index) => {\n            if (part.type === 'unchanged') {\n              return (\n                <span key={index} className=\"text-slate-700 dark:text-slate-300\">\n                  {part.text}\n                </span>\n              )\n            } else if (part.type === 'removed') {\n              return (\n                <span \n                  key={index} \n                  className=\"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 line-through px-1 rounded\"\n                  title=\"Removed\"\n                >\n                  {part.text}\n                </span>\n              )\n            } else {\n              return (\n                <span \n                  key={index} \n                  className=\"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-1 rounded\"\n                  title=\"Added\"\n                >\n                  {part.text}\n                </span>\n              )\n            }\n          })}\n        </div>\n        \n        <div className=\"flex items-center gap-4 mt-3 pt-3 border-t border-slate-200 dark:border-slate-600 text-xs text-slate-500 dark:text-slate-400\">\n          <div className=\"flex items-center gap-1\">\n            <span className=\"w-3 h-3 bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700 rounded\"></span>\n            Added\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <span className=\"w-3 h-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded\"></span>\n            Removed\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}"
    },
    "output": "",
    "metadata": {
      "diagnostics": {},
      "filepath": "/home/user/project/components/text-diff.tsx",
      "exists": false
    },
    "title": "components/text-diff.tsx",
    "time": {
      "start": 1759688654862,
      "end": 1759688654864
    }
  }
}